import{g as $,h as C,i as d,d as g,j as b,e,o as a,c as r,a as p,F as y,k as v,t as k,l as _,_ as f,m as x,n as S,p as m,r as U,q as h,w as q,f as w,b as I,s as N,v as R}from"./index.64f3437f.js";const B=$("user",{state:()=>({users:{isLoading:!1,results:[],page:1,limit:5,count:0}}),actions:{async loadUsers(){this.users.isLoading=!0,C.get("/users",{params:{offset:(this.users.page-1)*5}}).then(({data:s})=>{this.users=Object.assign(this.users,s)}).finally(()=>this.users.isLoading=!1)},async updatePageAndLoadUsers(s){await d.replace({query:{...d.currentRoute.value.query,page:s}})},async updateStateFromQuery(){const s=d.currentRoute.value.query;this.users.page=Number(s.page)||1}}});function A(s,n){return[...Array(n-s).keys()].map(o=>o+s)}const F={key:0,class:"pagination"},V=["disabled"],P=["onClick"],j=["disabled"],Q=g({__name:"pagination-ui",props:{page:null,limit:null,count:{default:0}},setup(s){const n=s,o=b(()=>Math.ceil(n.count/n.limit)+1);return(t,i)=>e(o)>1?(a(),r("div",F,[p("button",{disabled:s.page===1,onClick:i[0]||(i[0]=c=>t.$emit("click:prev"))},"prev",8,V),(a(!0),r(y,null,v(e(A)(1,e(o)),c=>(a(),r("div",{key:c,onClick:u=>t.$emit("click:page",c)},k(c),9,P))),128)),p("button",{disabled:s.page===e(o)-1,onClick:i[1]||(i[1]=c=>t.$emit("click:next"))}," next ",8,j)])):_("",!0)}});const D=f(Q,[["__scopeId","data-v-f922e7ee"]]),E=s=>(N("data-v-5e8a1aa2"),s=s(),R(),s),M={class:"users-list-wrapper"},O={key:0},T={key:1},z=E(()=>p("p",null,"No users",-1)),G={class:"users-list"},H=g({__name:"users-list",setup(s){const n=B(),o=x();S(m(o).query,async()=>{n.updateStateFromQuery(),n.loadUsers()});const{users:t,updatePageAndLoadUsers:i}=m(n);return(c,u)=>{const L=U("RouterLink");return a(),r("div",M,[!e(t).results.length&&e(t).isLoading?(a(),r("div",O,"Loading...")):e(t).results.length?_("",!0):(a(),r("div",T,[z,e(t).page!==1&&e(t).page*e(t).limit>e(t).count?(a(),h(L,{key:0,to:{query:{page:1}}},{default:q(()=>[w(" Back to first page? ")]),_:1})):_("",!0)])),p("div",G,[(a(!0),r(y,null,v(e(t).results,l=>(a(),r("div",{key:l.id},k(l.username),1))),128))]),I(D,{page:e(t).page,count:e(t).count,limit:e(t).limit,"onClick:prev":u[0]||(u[0]=()=>e(i)(e(t).page-1)),"onClick:next":u[1]||(u[1]=()=>e(i)(e(t).page+1)),"onClick:page":u[2]||(u[2]=l=>e(i)(l))},null,8,["page","count","limit"])])}}});const J=f(H,[["__scopeId","data-v-5e8a1aa2"]]),W=g({__name:"users-list-view",setup(s){return(n,o)=>(a(),h(J))}});export{W as default};
